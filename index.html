<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>éšæœºå›¾ç‰‡ API</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      min-height: 100vh;
      color: #e4e4e4;
      line-height: 1.6;
      padding: 40px 20px;
    }
    .container { max-width: 900px; margin: 0 auto; }
    header { text-align: center; margin-bottom: 50px; }
    h1 {
      font-size: 2.5rem;
      background: linear-gradient(90deg, #00d9ff, #00ff88);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
    }
    .subtitle { color: #888; font-size: 1.1rem; }
    .stats {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    .stat-item {
      background: rgba(255,255,255,0.05);
      padding: 15px 25px;
      border-radius: 10px;
      text-align: center;
    }
    .stat-num { font-size: 1.8rem; font-weight: bold; color: #00d9ff; }
    .stat-label { font-size: 0.85rem; color: #888; }
    .section {
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 25px;
    }
    h2 {
      font-size: 1.4rem;
      color: #00d9ff;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    h2::before {
      content: '';
      width: 4px;
      height: 24px;
      background: linear-gradient(180deg, #00d9ff, #00ff88);
      border-radius: 2px;
    }
    table { width: 100%; border-collapse: collapse; }
    th, td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }
    th { background: rgba(0,217,255,0.1); color: #00d9ff; font-weight: 600; }
    td code {
      background: rgba(0,0,0,0.3);
      padding: 3px 8px;
      border-radius: 4px;
      font-family: monospace;
      color: #7ee787;
    }
    .tag {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 500;
    }
    .tag-redirect { background: #238636; color: #fff; }
    .tag-json { background: #1f6feb; color: #fff; }
    .api-url {
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 6px;
      padding: 12px 15px;
      font-family: monospace;
      font-size: 0.9rem;
      color: #7ee787;
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 10px 0;
    }
    .copy-btn {
      background: #238636;
      color: #fff;
      border: none;
      padding: 6px 12px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.8rem;
      flex-shrink: 0;
    }
    .copy-btn:hover { background: #2ea043; }
    .copy-btn.copied { background: #00d9ff; }
    .example-code {
      background: #0d1117;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      overflow-x: auto;
    }
    .example-code pre {
      margin: 0;
      font-family: monospace;
      font-size: 0.85rem;
      color: #c9d1d9;
    }
    .preview-section { margin-top: 25px; text-align: center; }
    .preview-btn {
      background: linear-gradient(90deg, #00d9ff, #00ff88);
      color: #1a1a2e;
      border: none;
      padding: 12px 30px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .preview-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(0,217,255,0.3);
    }
    .preview-container { margin-top: 20px; display: none; }
    .preview-container.show { display: block; }
    .preview-img {
      max-width: 100%;
      max-height: 400px;
      border-radius: 10px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    }
    footer { text-align: center; margin-top: 50px; color: #666; font-size: 0.9rem; }
    @media (max-width: 600px) {
      h1 { font-size: 1.8rem; }
      .section { padding: 20px; }
      table { font-size: 0.85rem; }
      th, td { padding: 8px 10px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ¨ éšæœºå›¾ç‰‡ API</h1>
      <p class="subtitle">ç®€å•ã€å¿«é€Ÿã€å…è´¹çš„éšæœºå›¾ç‰‡æœåŠ¡</p>
      <div class="stats">
        <div class="stat-item">
          <div class="stat-num" id="totalCount">-</div>
          <div class="stat-label">å›¾ç‰‡æ€»æ•°</div>
        </div>
        <div class="stat-item">
          <div class="stat-num" id="hCount">-</div>
          <div class="stat-label">æ¨ªå±å›¾ç‰‡</div>
        </div>
        <div class="stat-item">
          <div class="stat-num" id="vCount">-</div>
          <div class="stat-label">ç«–å±å›¾ç‰‡</div>
        </div>
      </div>
    </header>

    <div class="section">
      <h2>API æ¥å£</h2>
      <table>
        <tr>
          <th>URL</th>
          <th>è¯´æ˜</th>
          <th>è¿”å›</th>
        </tr>
        <tr>
          <td><code>/pic</code></td>
          <td>è‡ªåŠ¨æ ¹æ®è®¾å¤‡é€‰æ‹©</td>
          <td><span class="tag tag-redirect">302 é‡å®šå‘</span></td>
        </tr>
        <tr>
          <td><code>/pic?img=ua</code></td>
          <td>è‡ªåŠ¨æ ¹æ® UA é€‰æ‹©</td>
          <td><span class="tag tag-redirect">302 é‡å®šå‘</span></td>
        </tr>
        <tr>
          <td><code>/pic?img=h</code></td>
          <td>æ¨ªå±éšæœºå›¾ç‰‡</td>
          <td><span class="tag tag-redirect">302 é‡å®šå‘</span></td>
        </tr>
        <tr>
          <td><code>/pic?img=v</code></td>
          <td>ç«–å±éšæœºå›¾ç‰‡</td>
          <td><span class="tag tag-redirect">302 é‡å®šå‘</span></td>
        </tr>
        <tr>
          <td><code>/pic?json=h</code></td>
          <td>æ¨ªå±éšæœºå›¾ç‰‡</td>
          <td><span class="tag tag-json">JSON</span></td>
        </tr>
        <tr>
          <td><code>/pic?json=v</code></td>
          <td>ç«–å±éšæœºå›¾ç‰‡</td>
          <td><span class="tag tag-json">JSON</span></td>
        </tr>
      </table>
    </div>

    <div class="section">
      <h2>å¿«é€Ÿä½¿ç”¨</h2>
      
      <p style="color:#aaa;margin-bottom:10px;">ğŸ“· ç›´æ¥è·å–å›¾ç‰‡ï¼ˆé€‚ç”¨äº img æ ‡ç­¾ã€CSS èƒŒæ™¯ï¼‰</p>
      <div class="api-url">
        <code id="urlPic"></code>
        <button class="copy-btn" onclick="copyUrl(this, 'pic')">å¤åˆ¶</button>
      </div>
      
      <p style="color:#aaa;margin:15px 0 10px;">ğŸ“Š è·å– JSON æ•°æ®ï¼ˆå«ä¸»é¢˜ä¿¡æ¯ï¼‰</p>
      <div class="api-url">
        <code id="urlJson"></code>
        <button class="copy-btn" onclick="copyUrl(this, 'json')">å¤åˆ¶</button>
      </div>
      
      <div class="example-code">
<pre>// JSON å“åº”ç¤ºä¾‹
{
  "theme": "dark",
  "url": "<span id="exampleUrl"></span>"
}</pre>
      </div>
    </div>

    <div class="section">
      <h2>ä½¿ç”¨ç¤ºä¾‹</h2>
      
      <p style="color:#888;font-size:0.9rem;margin-bottom:8px;">HTML</p>
      <div class="example-code">
<pre>&lt;img src="<span class="origin"></span>/pic?img=h" alt="éšæœºå£çº¸"&gt;</pre>
      </div>
      
      <p style="color:#888;font-size:0.9rem;margin-bottom:8px;">CSS èƒŒæ™¯</p>
      <div class="example-code">
<pre>body {
  background-image: url('<span class="origin"></span>/pic');
  background-size: cover;
}</pre>
      </div>
      
      <p style="color:#888;font-size:0.9rem;margin-bottom:8px;">JavaScript</p>
      <div class="example-code">
<pre>fetch('<span class="origin"></span>/pic?json=h')
  .then(res => res.json())
  .then(data => console.log(data.theme, data.url));</pre>
      </div>
      
      <div class="preview-section">
        <button class="preview-btn" onclick="previewImage()">âœ¨ é¢„è§ˆéšæœºå›¾ç‰‡</button>
        <div class="preview-container" id="previewContainer">
          <img class="preview-img" id="previewImg" alt="é¢„è§ˆå›¾ç‰‡">
        </div>
      </div>
    </div>

    <footer>
      <p>ğŸ’¡ å›¾ç‰‡æ ¼å¼ï¼šWebP | è‡ªåŠ¨é€‚é…æ·±è‰²/æµ…è‰²ä¸»é¢˜</p>
    </footer>
  </div>

  <script>
    const origin = location.origin;
    
    // å¡«å…… URL
    document.getElementById('urlPic').textContent = origin + '/pic';
    document.getElementById('urlJson').textContent = origin + '/pic?json=h';
    document.getElementById('exampleUrl').textContent = origin + '/ri/hd/1.webp';
    document.querySelectorAll('.origin').forEach(el => el.textContent = origin);
    
    // åŠ è½½ç»Ÿè®¡
    fetch('/ri/count.json')
      .then(res => res.json())
      .then(data => {
        const hTotal = (data.hd || 0) + (data.hl || 0);
        const vTotal = (data.vd || 0) + (data.vl || 0);
        document.getElementById('totalCount').textContent = hTotal + vTotal;
        document.getElementById('hCount').textContent = hTotal;
        document.getElementById('vCount').textContent = vTotal;
      })
      .catch(() => {
        document.getElementById('totalCount').textContent = '?';
        document.getElementById('hCount').textContent = '?';
        document.getElementById('vCount').textContent = '?';
      });
    
    function copyUrl(btn, type) {
      const url = type === 'pic' ? origin + '/pic' : origin + '/pic?json=h';
      navigator.clipboard.writeText(url).then(() => {
        btn.textContent = 'å·²å¤åˆ¶!';
        btn.classList.add('copied');
        setTimeout(() => {
          btn.textContent = 'å¤åˆ¶';
          btn.classList.remove('copied');
        }, 1500);
      });
    }
    
    function previewImage() {
      const container = document.getElementById('previewContainer');
      const img = document.getElementById('previewImg');
      img.src = origin + '/pic?t=' + Date.now();
      container.classList.add('show');
      img.onload = () => img.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  </script>
</body>
</html>
